<!DOCTYPE html>
<html lang="en">
<html>
    <head>
        <meta charset="UTF-8">
        <title>Rule 110 simulation</title>       
        <!-- <link rel="icon" type="image/x-icon" href="/images/favicon.ico">  -->
    </head>
    <!-- css -->
    <style>
        html, body{
            
            background-color: #FAF9EE;
            display: flex;
            justify-content: center;
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: sans-serif;
         
        }

        .grid {
            display: grid; /* دیو به صورت شبکه ای */
            justify-content: start;
            align-content: start;
            gap: 1px; /*distance between cell*/
            background-color: #dccfc0;
            flex-grow: 1; /*kesh miad*/
            overflow: hidden;
        }

        .cell { /*each cell*/
      width: 20px; 
      height: 20px;
      background-color: #faf9ee;
      border: 1px solid #00000049;
      /* cursor: pointer; ba neshangar mouse tagheer mikonad */
        }


      .cell.active {
      background-color: #000000; 
    }

    .sidebar {
      width: 30%;
      background-color: #A2AF9B;
      padding: 20px;
      border-left: 3px solid #a2af9b9f;


    }

  

        h2   {color: #586053;}
        p1    {color: #586053;}
        
    </style>
    <!-- css -->
    <body>
        <div class="grid" id="grid"></div> 
        <!-- تا در جی اس بهش دسترسی داشته باشیم 
         با هنصر div 
         در جاوا اسکریپت صد ها div میسازیم
         -->


         <div class="sidebar">
          <h2 style="text-align:center;"> cellular automata simulator </h2>
        </div>
    

        <script>
            
  // const grid = document.getElementById("grid");
  // const cellSize = 20;
  // const cellGap = 1;

  // function createGrid() {
  //   // پاک کردن سلول‌های قبلی
  //   grid.innerHTML = "";

  //   // اندازه جدید صفحه
  //   const screenWidth = window.innerWidth;
  //   const screenHeight = window.innerHeight;

  //   // محاسبه سطر و ستون
  //   const cols = Math.floor(screenWidth / (cellSize + cellGap));
  //   const rows = Math.floor(screenHeight / (cellSize + cellGap));

  //   // تنظیم گرید با اندازه جدید
  //   grid.style.gridTemplateColumns = `repeat(${cols}, ${cellSize}px)`;
  //   grid.style.gridTemplateRows = `repeat(${rows}, ${cellSize}px)`;

  //   // ساخت سلول‌ها
  //   for (let i = 0; i < rows * cols; i++) {
  //     const cell = document.createElement("div");
  //     cell.classList.add("cell");
  //     cell.addEventListener("click", () => {
  //       cell.classList.toggle("active");
  //     });
  //     grid.appendChild(cell);
  //   }
  // }

  async function fetchAndRenderRule110(initial, rule, steps) {
  const response = await fetch('/api/rule110/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      initial: "0000000000000001",  // مثلاً "0000000100000000"
      rule: 110,
      steps: 30
    })
  });

  const data = await response.json();
      const generations = data.generations;

      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      const rows = generations.length;
      const cols = generations[0].length;

      grid.style.gridTemplateColumns = `repeat(${cols}, 20px)`;
      grid.style.gridTemplateRows = `repeat(${rows}, 20px)`;

      generations.forEach(row => {
        row.forEach(cell => {
          const div = document.createElement('div');
          div.classList.add('cell');
          if (cell === 1) {
            div.classList.add('active');
          }
          grid.appendChild(div);
        });
      });
    }

    window.onload = fetchAndRenderRule110;



        </script>

    </body>
</html>




